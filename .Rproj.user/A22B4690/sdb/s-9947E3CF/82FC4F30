{
    "contents" : "---\ntitle: \"Analysis of Which Weather Events Have the Greatest Impact Economically and on Population Health\"\nauthor: \"Sarah Fogel\"\ndate: \"Wednesday, January 14, 2015\"\noutput: html_document\n---\n\n## Synopsis\nThe following analysis attempts to identify the types of weather events which are the most harmful to population health and which cause the most economic damage.  The data used is taken from a database developed by the U.S. National Oceanic and Atmospheric Administration and was accessed on January 14th, 2015.  THe analysis assumes that fatalities and injuries are a proxy for population health and property damage is a proxy for economic impact.  This analysis finds that, in general, tornados cause the most damage in both categories.\n\n\n## Data Processing\nFirst check to see if the data has already been downloaded into the working directory.  If it has not, then download it.\n```{r, results='hide'}\n    if(\"StormData.csv.bz2\" %in% dir()){} else {\n        download.file(\"https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2\", \"StormData.csv.bz2\")\n    }\n```\nNow read the data into R and subset it to include only the variables of interest.  These are the event type, the number of fatalities, the number of injuries, and the dollar value of the property damage.\n```{r, cache=TRUE}\n    stormdata<-read.csv(\"StormData.csv.bz2\")\n    stormdata<-stormdata[c(\"EVTYPE\", \"FATALITIES\", \"INJURIES\", \"PROPDMG\")]\n```\nNo further pre-processing is necessary for this analysis.  All further analysis will be performed on this data frame as is.\n\n\n## Results\n\nTwo general methods will be used to identify the \"most\" damaging weather events - those events which cause the most total damage and those events which cause the highest median damage.\n\n### Population Health\nTo evaluate the effects of the various weather events on population health, the variables describing fatalities and injuries will be used.\n\nFirst, the total and median number of fatalities and injuries were calcuated for each event.\n\n```{r}\n# Split the fatalities variable by event type\n    attach(stormdata)\n    by.event.type<-split(FATALITIES, EVTYPE)\n# Apply sum and median\n    total.fatalities.by.type<-sapply(by.event.type, sum)\n    median.fatalities.by.type<-sapply(by.event.type, median)\n\n    rm(by.event.type)   \n# Repeat for injuries\n    by.event.type<-split(INJURIES, EVTYPE)\n# Apply sum and median\n    total.injuries.by.type<-sapply(by.event.type, sum)\n    median.injuries.by.type<-sapply(by.event.type, median)\n\n    rm(by.event.type)   \n    detach(stormdata)\n```\n\nThe total and median number of fatalties and injuries are graphed below.\n```{r}\n# Graph fatalities by type\n    par(mfrow=c(2,1), mar=c(4.3,4.3,2,2))\n    plot(total.fatalities.by.type, type=\"l\", xlab=\"\", ylab=\"Total Fatalities\")\n    plot(median.fatalities.by.type, type=\"l\", xlab=\"Event Type\", ylab=\"Median Fatalities\")\n    \n# Graph injuries by type\n    plot(total.injuries.by.type, type=\"l\", xlab=\"\", ylab=\"Total Injuries\")\n    plot(median.injuries.by.type, type=\"l\", xlab=\"Event Type\", ylab=\"Median Injuries\")  \n    par(mfrow=c(1,1), mar=(c(5,4,4,2)+.1))\n```\n\nBased on these graphs, various ouliers have been identified: one major peak in the total fatalities per type, three outlying peaks in median fatalities by type, one major peak in total injuries per type and two outlying peaks in median injuries by type.\n\nThe event types that cause the most damage to population health are identified below:\n\n```{r, results='hold'}\n    head(names(total.fatalities.by.type[order(total.fatalities.by.type, decreasing=T)]), n=1)\n    head(names(median.fatalities.by.type[order(median.fatalities.by.type, decreasing=T)]), n=3)\n    head(names(total.injuries.by.type[order(total.injuries.by.type, decreasing=T)]), n=1)\n    head(names(median.injuries.by.type[order(median.injuries.by.type, decreasing=T)]), n=1)\n```\n\n### Economic Impact\n\nTo evaluate the effects of the various weather events on population health, the variable describing property damage will be used.\n\nFirst, the total and median values of property damage were calcuated for each event.\n```{r}\n# Split the property damage variable by event type\n    attach(stormdata)\n    by.event.type<-split(PROPDMG, EVTYPE)\n# Apply sum and median\n    total.propdamage.by.type<-sapply(by.event.type, sum)\n    median.propdamage.by.type<-sapply(by.event.type, median)\n\n    rm(by.event.type)   \n\n    detach(stormdata)\n```\n\nThe total and median amount of property damage is graphed below.\n\n```{r}\n    # Line graph of property damage by type\n    par(mfrow=c(2,1), mar=c(4.3,4.3,2,2))\n    plot(total.propdamage.by.type, type=\"l\", xlab=\"\", ylab=\"Total Property Damage\")\n    plot(median.propdamage.by.type, type=\"l\", xlab=\"Event Type\", ylab=\"Median Property Damage\")  \n    par(mfrow=c(1,1), mar=(c(5,4,4,2)+.1))\n```\n\nBased on these graphs, various ouliers have been identified: one major peak in the total property damage per type and one peak that stands out above the rest in median property damage per type.\n\nThe event types that cause the most economic damage are identified below:\n\n```{r, results='hold'}\n    head(names(total.propdamage.by.type[order(total.propdamage.by.type, decreasing=T)]), n=1)\n    head(names(median.propdamage.by.type[order(median.propdamage.by.type, decreasing=T)]), n=1)\n```\n\n\n",
    "created" : 1421958847363.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2562275945",
    "id" : "82FC4F30",
    "lastKnownWriteTime" : 1421963414,
    "path" : "~/Coursera Courses/Reproducible Research/RRCourseProj2/RRCourseProject2.Rmd",
    "project_path" : "RRCourseProject2.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}